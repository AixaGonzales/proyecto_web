<div class="top-buttons">
    <!-- Icono de notificación con badge -->
    <button mat-icon-button [matBadge]="notificationCount" matBadgeColor="accent"
        [matMenuTriggerFor]="notificationsMenu" class="icon-button" matTooltip="Notificaciones"
        (click)="loadNotificationCount()">
        <mat-icon>notifications</mat-icon>
    </button>

    <mat-menu #notificationsMenu="matMenu" class="notifications-menu" [overlapTrigger]="false" xPosition="before">
        <app-notifications-panel></app-notifications-panel>
    </mat-menu>

    <!-- Menú de usuario -->
    <ng-container *ngIf="isLoggedIn; else notLoggedIn">
        <button mat-icon-button [matMenuTriggerFor]="userMenu" class="icon-button" matTooltip="Mi cuenta">
            <mat-icon>account_circle</mat-icon>
        </button>
        <mat-menu #userMenu="matMenu" class="user-menu">
            <button mat-menu-item disabled>
                <mat-icon>person</mat-icon>
                <span>{{ userName }}</span>
            </button>
            <button mat-menu-item (click)="logout()">
                <mat-icon>exit_to_app</mat-icon>
                <span>Cerrar sesión</span>
            </button>
        </mat-menu>
    </ng-container>

    <ng-template #notLoggedIn>
        <button mat-icon-button [matMenuTriggerFor]="guestMenu" class="icon-button" matTooltip="Iniciar sesión">
            <mat-icon>person_off</mat-icon>
        </button>
        <mat-menu #guestMenu="matMenu">
            <button mat-menu-item disabled>
                <mat-icon>info</mat-icon>
                <span>No has iniciado sesión</span>
            </button>
        </mat-menu>
    </ng-template>
</div>